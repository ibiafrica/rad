<script src="<?= BASE_ASSET; ?>/js/jquery.hotkeys.js"></script>

<script type="text/javascript">
  //This page is a result of an autogenerated content made by running test.html with firefox.
  function domo() {

    // Binding keys
    $('*').bind('keydown', 'Ctrl+a', function assets() {
      window.location.href = BASE_URL + '/administrator/transfert/add';
      return false;
    });

    $('*').bind('keydown', 'Ctrl+f', function assets() {
      $('#sbtn').trigger('click');
      return false;
    });

    $('*').bind('keydown', 'Ctrl+x', function assets() {
      $('#reset').trigger('click');
      return false;
    });

    $('*').bind('keydown', 'Ctrl+b', function assets() {

      $('#reset').trigger('click');
      return false;
    });
  }

  jQuery(document).ready(domo);
</script>
<!-- Content Header (Page header) -->
<div class="trdata"></div>
<section class="content-header">
  <h1>
    Rapport <small>Recette journaliere</small>
  </h1>
  <ol class="breadcrumb">
    <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
    <li class="active">Recette journaliere</li>
  </ol>
</section>
<!-- Main content -->


<section class="content" id="mypage">
  <div class="row">

    <div class="col-md-12">
      <div class="box box-warning">
        <div class="box-body ">
          <!-- Widget: user widget style 1 -->
          <div class="box box-widget widget-user-2">
            <!-- Add the bg color to the header using any of the bg-* classes -->
            <div class="widget-user-header ">

              <div class="widget-user-image">
                <img class="img-circle" src="<?= BASE_ASSET; ?>/img/list.png" alt="User Avatar">
              </div>
              <!-- /.widget-user-image -->
              <h3 class="widget-user-username">Recette journaliere
              </h3>

              <div class="pull-right">
                <button id="btnprint" title="imprimer rapport chiffres d'affaire" type="button" class="btn btn-default"><i class="fa fa-print"></i></button>

                <a class="btn btn-flat btn-success" title="<?= cclang('export'); ?> rapport chiffres d'affaire"><i class="fa fa-file-excel-o"></i></a>
              </div>

              <br>
            </div>
          </div>
          <b class="header_title">Rapport Recette journaliere du <?= $this->input->get('debut'); ?> au <?= $this->input->get('fin'); ?></b>
          <form name="form_trans" id="form_trans" action="<?= base_url('administrator/rapport_recette_j/index'); ?>">

            <!-- /.widget-user -->
            <div class="row">


              <div class="col-md-3 ">
                <div class="input-group">
                  <div class="input-group-addon">
                    Du:
                  </div>
                  <input type="text" class="form-control dateTimePickers" name="debut" id="filter" placeholder="<?= cclang('filter'); ?>" value="<?= $this->input->get('debut'); ?>">
                </div>
              </div>

              <div class="col-md-3 ">
                <div class="input-group date">
                  <div class="input-group-addon">
                    Au:
                  </div>
                  <input type="text" class="form-control dateTimePickers" name="fin" id="filter" placeholder="<?= cclang('filter'); ?>" value="<?= $this->input->get('fin'); ?>">
                </div>

              </div>

              <div class="col-md-2">
                <select class="form-control" name="typeClient">
                  <option value="">--Type Client--</option>
                  <option <?= $this->input->get('typeClient') == 'H' ? 'selected' : '' ?> value="H">Hospitalis√©</option>
                  <option <?= $this->input->get('typeClient') == 'A' ? 'selected' : '' ?> value="A">Ambulant</option>
                </select>
              </div>

              <div class="col-md-2">
                <select class="form-control" name="typePayement">
                  <option value="">--Type Payement--</option>
                  <option <?= $this->input->get('typePayement') == 'cash' ? 'selected' : '' ?> value="cash">Cash</option>
                  <option <?= $this->input->get('typePayement') == 'bon' ? 'selected' : '' ?> value="bon">Bon commande</option>
                </select>
              </div>

              <div class="col-md-2">

                <button type="submit" class="btn btn-flat" name="sbtn" id="sbtn" value="Apply" title="<?= cclang('filter_search'); ?>">
                  Filter
                </button>


                <a class="btn btn-default btn-flat" name="reset" id="reset" value="Apply" href="<?= base_url('administrator/rapport_recette_j/index'); ?>" title="<?= cclang('reset_filter'); ?>">
                  <i class="fa fa-undo"></i>
                </a>

              </div>


            </div>
          </form>
          <hr>
          <div class="table-responsive row">
            <table class="table table-bordered table-striped dataTable" id="mytable">
              <thead>
                <tr class="">
                  <th>Fiche </th>
                  <th>Recette</th>
                  <th>Auteur</th>
                </tr>
              </thead>
              <tbody id="tbody_pos_store_1_ibi_stock_transfert">
                <?php $total = 0;
                foreach ($chiffre as $row) : $total += $row['PRIX_TOTAL']; ?>
                  <tr>
                    <td><?= $row['PATIENT_FILE_CODE'] ?></td>
                    <td><?= number_format($row['PRIX_TOTAL']) ?></td>
                    <td><?php $users = $this->model_rm->getOne('aauth_users', array('id' => $row['CREATED_BY_HOSPITAL_IBI_COMMANDES_PRODUITS'])); ?>
                      <?= _ent($users['full_name']); ?>
                    </td>
                  </tr>
                <?php endforeach; ?>
                <?php if ($total > 0) : ?>
                  <tr>
                    <th>Total</th>
                    <th><?= number_format($total) ?></th>
                    <th>-</th>
                  </tr>
                <?php endif; ?>
              </tbody>
            </table>
          </div>
        </div>
        <hr>



      </div>
      <!--/box body -->
    </div>
    <!--/box -->
  </div>
  </div>
</section>
<!-- /.content -->

<!-- Page script -->
<script>
  $(document).on('click', '#btnprint', function() {
    // let data=$('#mytable').html();
    // $('.trdata').html(data);
    window.print();
  })
</script>








<style type="text/css">
  @media all {
    .page-break {
      display: none;
    }

    .trdata {
      display: none;
    }

    .header_title {
      display: none;
      text-align: center;
    }
  }

  @media print {
    .page-break {
      display: block;
      page-break-before: always;
    }

    #form_trans {
      display: none;
    }

    .trdata {
      display: block;
    }

    .header_title {
      display: block;
      text-align: center;
    }

    .main-footer {
      display: none;
    }

    table tbody tr td {
      border: 1px solid #000 !important;
    }



    .view-nav,
    .main-footer,
    #btn_print,
    .title,
    .btn,
    #myform,
    .widget-user-header {
      display: none !important;
    }

    a {
      display: none !important;
    }

    .print {
      text-align: center !important;
      background-color: #0002 !important;
    }


    table td {
      border: 1px solid #000 !important;
    }

    td {
      border: 1px solid #000 !important;
    }

    table tr th {
      border: 1px solid black !important;

    }

    th {
      background-color: green !important;
    }

    img {
      margin-top: 15% !important;

    }







    .celldiv {
      background-color: #999 !important;
    }

  }
</style>


<script type="text/javascript">
    $(".dateTimePickers").datetimepicker({
        maxDate: new Date(),
        maxDateTime:new Date().getTime(),
        format: "Y-m-d H:i:s",
        autoclose: true,
        todayBtn: true,
        startDate: "Y-m-d H:i:s",
        step: 1
    });
</script>